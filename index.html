<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Juego de Billar</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #006400;
            text-align: center;
        }
        canvas {
            border: 1px solid black;
            background-color: #0b6623;
            display: block;
            margin: 0 auto;
        }
        #instructions {
            color: white;
            margin-top: 1em;
        }
    </style>
</head>
<body>
    <h1>Juego de Billar</h1>
    <canvas id="billiardsCanvas" width="800" height="400"></canvas>
    <p id="instructions">Arrastra y suelta las bolas para jugar.</p>
    <script>
        const canvas = document.getElementById('billiardsCanvas');
        const ctx = canvas.getContext('2d');
        const balls = [];
        const ballRadius = 10;

        // Inicializar bolas
        for (let i = 0; i < 15; i++) {
            balls.push({
                x: Math.random() * (canvas.width - 2 * ballRadius) + ballRadius,
                y: Math.random() * (canvas.height - 2 * ballRadius) + ballRadius,
                dx: Math.random() * 2 - 1,
                dy: Math.random() * 2 - 1,
                dragging: false
            });
        }

        canvas.addEventListener('mousedown', startDrag);
        canvas.addEventListener('mousemove', drag);
        canvas.addEventListener('mouseup', endDrag);
        canvas.addEventListener('mouseleave', endDrag);

        function drawBall(ball) {
            ctx.beginPath();
            ctx.arc(ball.x, ball.y, ballRadius, 0, Math.PI * 2);
            ctx.fillStyle = '#FFD700';
            ctx.fill();
            ctx.stroke();
            ctx.closePath();
        }

        function draw() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            for (const ball of balls) {
                drawBall(ball);
            }
        }

        function update() {
            for (const ball of balls) {
                if (!ball.dragging) {
                    ball.x += ball.dx;
                    ball.y += ball.dy;
                    if (ball.x + ball.dx > canvas.width - ballRadius || ball.x + ball.dx < ballRadius) {
                        ball.dx = -ball.dx;
                    }
                    if (ball.y + ball.dy > canvas.height - ballRadius || ball.y + ball.dy < ballRadius) {
                        ball.dy = -ball.dy;
                    }
                }
            }
        }

        function startDrag(event) {
            const rect = canvas.getBoundingClientRect();
            const x = event.clientX - rect.left;
            const y = event.clientY - rect.top;
            for (const ball of balls) {
                const dist = Math.sqrt((x - ball.x) ** 2 + (y - ball.y) ** 2);
                if (dist < ballRadius) {
                    ball.dragging = true;
                    ball.dx = 0;
                    ball.dy = 0;
                }
            }
        }

        function drag(event) {
            const rect = canvas.getBoundingClientRect();
            const x = event.clientX - rect.left;
            const y = event.clientY - rect.top;
            for (const ball of balls) {
                if (ball.dragging) {
                    ball.x = x;
                    ball.y = y;
                }
            }
        }

        function endDrag() {
            for (const ball of balls) {
                ball.dragging = false;
            }
        }

        function loop() {
            update();
            draw();
            requestAnimationFrame(loop);
        }

        loop();
    </script>
</body>
</html>
